var apiKey="55abe3bd34deec2b21d51fcadc4b0614",latitude="34.049",longitude="74.3921",units="si",lang=$("html").attr("lang"),url="https://api.darksky.net/forecast/"+apiKey+"/"+latitude+","+longitude+"?units="+units+"&lang="+(lang="cn"==lang?"zh-tw":lang);if("en"==lang)var gulmarg="Gulmarg",forecast="Forecast",weekDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],hi="Hi",lo="Lo",moreInfo="More Info",moreInfoLink="/gulmarg-ski-resort/about-gulmarg/weather";else if("fr"==lang)gulmarg="Gulmarg",forecast="Prévoir",weekDays=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],hi="Hi",lo="Lo",moreInfo="Plus d'Info",moreInfoLink="/fr/gulmarg-station-de-ski/a-propos/meteo";else if("zh-tw"==lang)gulmarg="古尔马尔格",forecast="預測",weekDays=["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],hi="高",lo="低",moreInfo="更多信息",moreInfoLink="/gulmarg-ski-resort/about-gulmarg/weather";else if("es"==lang)gulmarg="Gulmarg",forecast="Pronóstico",weekDays=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],hi="Hi",lo="Lo",moreInfo="Más información",moreInfoLink="/gulmarg-ski-resort/about-gulmarg/weather";function getIconClass(a){switch(a){case"clear-day":return"flaticon-sunny-day";case"clear-night":return"flaticon-night";case"rain":return"flaticon-rainy-day";case"snow":return"flaticon-snow-cloud";case"sleet":return"flaticon-sleet";case"wind":return"flaticon-windy-day";case"fog":return"flaticon-foggy";case"cloudy":return"flaticon-cloudy-day";case"partly-cloudy-day":return"flaticon-partialy-cloudy";case"partly-cloudy-night":return"flaticon-dark-night";default:return"flaticon-blizzard"}}function getDayOfWeek(a){var e=new Date(a).getDay();return isNaN(e)?null:weekDays[e]}$.ajax({headers:{"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},dataType:"jsonp",type:"GET",url:url,success:function(a){if(a.error)console.log("An error occured while getting weather from Darksky.");else{var e=getIconClass(a.currently.icon),s=Math.round(a.currently.temperature),t=a.currently.summary,r=Math.round(a.daily.data[1].apparentTemperatureHigh),n=Math.round(a.daily.data[1].apparentTemperatureLow),o=getDayOfWeek(1e3*a.daily.data[2].time),i=getIconClass(a.daily.data[2].icon),l=Math.round(a.daily.data[2].apparentTemperatureHigh),c=Math.round(a.daily.data[2].apparentTemperatureLow),d=getDayOfWeek(1e3*a.daily.data[3].time),p=getIconClass(a.daily.data[3].icon),u=Math.round(a.daily.data[3].apparentTemperatureHigh),m=Math.round(a.daily.data[3].apparentTemperatureLow),f=getDayOfWeek(1e3*a.daily.data[4].time),y=getIconClass(a.daily.data[4].icon),h=Math.round(a.daily.data[4].apparentTemperatureHigh),g=Math.round(a.daily.data[4].apparentTemperatureLow),v=getDayOfWeek(1e3*a.daily.data[5].time),w=getIconClass(a.daily.data[5].icon),x=Math.round(a.daily.data[5].apparentTemperatureHigh),k=Math.round(a.daily.data[5].apparentTemperatureLow),M=getDayOfWeek(1e3*a.daily.data[6].time),b=getIconClass(a.daily.data[6].icon),I=Math.round(a.daily.data[6].apparentTemperatureHigh),D=Math.round(a.daily.data[6].apparentTemperatureLow),T=getDayOfWeek(1e3*a.daily.data[7].time),L=getIconClass(a.daily.data[7].icon),C=Math.round(a.daily.data[7].apparentTemperatureHigh),H=Math.round(a.daily.data[7].apparentTemperatureLow);$("#weather").html('                <a href="javascript:void(0);" class="title" title="Weather">                    <span class="title '+e+'" id="current-icon"></span>                    <span id="current-temperature" class="title">'+s+'</span>                    <span id="current-temperature-unit">&#x2103;</span>                </a>                <ul class="dropdown-menu">                    <li class="mega-menu-content">                        <div id="weather-dropdown">                            <span id="weather-close">                                <i class="fa fa-close" aria-hidden="true"></i>                            </span>                            <div class="row">                                <div class="col-xs-12 col-md-3">                                    <h5 class="text-center" style="text-transform: uppercase;">'+gulmarg+'</h5>                                    <div id="dropdown-menu-current-weather" class="row">                                        <div class="col-xs-12 text-center" style="position:relative">                                            <span id="dropdown-menu-current-icon" class="'+e+'"></span>                                            <span id="dropdown-menu-current-temperature">'+s+'</span>                                            <span id="dropdown-menu-current-temperature-unit">&#x2103;</span>                                        </div>                                        <div id="dropdown-menu-current-summary" class="col-xs-12 text-center">'+t+'</div>                                        <div class="col-xs-12 text-center">                                            <span id="dropdown-menu-today-high">'+hi+' <span id="dropdown-menu-today-high-temperature">'+r+'&#x2103;</span></span>                                            <span id="dropdown-menu-today-low">'+lo+' <span id="dropdown-menu-today-low-temperature">'+n+'&#x2103;</span></span>                                        </div>                                    </div>                                </div>                                <div class="col-xs-12 col-md-9">                                    <h5 class="text-center sm-m-b-20" style="text-transform: uppercase;">'+forecast+'</h5>                                    <div id="forecast" class="row">                                        <div class="col-xs-6 col-sm-4 col-md-2 p-b-15 text-center" style="position:relative">                                            <div class="forcast-weekday">'+o+'</div>                                            <div class="forcast-icon"><span class="'+i+'"></span></div>                                            <span class="forcast-high">'+hi+' <span class="forcast-temperature">'+l+'&#x2103;</span></span>                                            <span class="forcast-low">'+lo+' <span class="forcast-temperature">'+c+'&#x2103;</span></span>                                        </div>                                        <div class="col-xs-6 col-sm-4 col-md-2 p-b-15 text-center" style="position:relative">                                            <div class="forcast-weekday">'+d+'</div>                                            <div class="forcast-icon"><span class="'+p+'"></span></div>                                            <span class="forcast-high">'+hi+' <span class="forcast-temperature">'+u+'&#x2103;</span></span>                                            <span class="forcast-low">'+lo+' <span class="forcast-temperature">'+m+'&#x2103;</span></span>                                        </div>                                        <div class="col-xs-6 col-sm-4 col-md-2 p-b-15 text-center" style="position:relative">                                            <div class="forcast-weekday">'+f+'</div>                                            <div class="forcast-icon"><span class="'+y+'"></span></div>                                            <span class="forcast-high">'+hi+' <span class="forcast-temperature">'+h+'&#x2103;</span></span>                                            <span class="forcast-low">'+lo+' <span class="forcast-temperature">'+g+'&#x2103;</span></span>                                        </div>                                        <div class="col-xs-6 col-sm-4 col-md-2 p-b-15 text-center" style="position:relative">                                            <div class="forcast-weekday">'+v+'</div>                                            <div class="forcast-icon"><span class="'+w+'"></span></div>                                            <span class="forcast-high">'+hi+' <span class="forcast-temperature">'+x+'&#x2103;</span></span>                                            <span class="forcast-low">'+lo+' <span class="forcast-temperature">'+k+'&#x2103;</span></span>                                        </div>                                        <div class="col-xs-6 col-sm-4 col-md-2 p-b-15 text-center" style="position:relative">                                            <div class="forcast-weekday">'+M+'</div>                                            <div class="forcast-icon"><span class="'+b+'"></span></div>                                            <span class="forcast-high">'+hi+' <span class="forcast-temperature">'+I+'&#x2103;</span></span>                                            <span class="forcast-low">'+lo+' <span class="forcast-temperature">'+D+'&#x2103;</span></span>                                        </div>                                        <div class="col-xs-6 col-sm-4 col-md-2 p-b-15 text-center" style="position:relative">                                            <div class="forcast-weekday">'+T+'</div>                                            <div class="forcast-icon"><span class="'+L+'"></span></div>                                            <span class="forcast-high">'+hi+' <span class="forcast-temperature">'+C+'&#x2103;</span></span>                                            <span class="forcast-low">'+lo+' <span class="forcast-temperature">'+H+'&#x2103;</span></span>                                        </div>                                    </div>                                    <div class="col-xs-12 text-right m-t-10">                                        <a href="'+moreInfoLink+'">                                            <span id="more-info">'+moreInfo+'<i class="fa fa-info-circle m-l-5"></i></span>                                        </a>                                    </div>                                </div>                            </div>                        </div>                    </li>                </ul>            ')}},error:function(){console.log("An error occured while getting response from Darksky.")}}),$("#header .menu-right > ul > li#weather").on("click",function(){$(window).width()<992&&$("#header .menu-right > ul > li#weather > ul.dropdown-menu").addClass("mobile-active")}),$("body").on("click","#header .menu-right > ul > li .dropdown-menu.mobile-active .mega-menu-content #weather-close",function(){$(window).width()<992&&$("#header .menu-right > ul > li#weather > ul.dropdown-menu").removeClass("mobile-active")});